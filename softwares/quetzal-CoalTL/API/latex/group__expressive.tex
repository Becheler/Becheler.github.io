\hypertarget{group__expressive}{}\doxysection{expressive}
\label{group__expressive}\index{expressive@{expressive}}


Compile-\/time mathematical expressions optimization.  


\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structquetzal_1_1expressive_1_1literal__factory}{quetzal\+::expressive\+::literal\+\_\+factory$<$ Args $>$}}
\begin{DoxyCompactList}\small\item\em Transforms \href{https://stackoverflow.com/documentation/c\%2b\%2b/7836/literals\#t=201709240552046831589}{\texttt{ literals}} into operator friendly classes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename F $>$ }\\constexpr auto \mbox{\hyperlink{group__expressive_gacdec2cd4ec959709f7a1891702c4d5dd}{quetzal\+::expressive\+::use}} (F f)
\begin{DoxyCompactList}\small\item\em Transforms functions into operator friendly classes. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename... Args, typename T $>$ }\\constexpr auto \mbox{\hyperlink{group__expressive_ga58c778e9b9b37d66cacf0661990d0545}{quetzal\+::expressive\+::literal}} (T t)
\begin{DoxyCompactList}\small\item\em Transforms \href{https://stackoverflow.com/documentation/c\%2b\%2b/7836/literals\#t=201709240552046831589}{\texttt{ literals}} into operator friendly classes. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename F , typename... Fs$>$ }\\constexpr auto \mbox{\hyperlink{group__expressive_ga12574ee3c5da08311afb7eb76d7089b4}{quetzal\+::expressive\+::compose}} (F f, Fs... fs)
\begin{DoxyCompactList}\small\item\em Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Inner , typename Outer $>$ }\\constexpr auto \mbox{\hyperlink{group__expressive_ga94be9d80e6f5f2281e4183109879a101}{quetzal\+::expressive\+::operator$>$$>$}} (Inner inner, Outer outer)
\begin{DoxyCompactList}\small\item\em Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} \end{DoxyCompactList}\item 
{\footnotesize template$<$typename Inner , typename Outer $>$ }\\constexpr auto \mbox{\hyperlink{group__expressive_ga92089d2dbe2fb1d9ec4b8da47930b8ec}{quetzal\+::expressive\+::operator$<$$<$}} (Outer outer, Inner inner)
\begin{DoxyCompactList}\small\item\em Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} \end{DoxyCompactList}\item 
{\footnotesize template$<$typename F1 , typename F2 , typename... Fs$>$ }\\constexpr auto \mbox{\hyperlink{group__expressive_gad7b37454071e4a4d0cf22961f4c6f2c8}{quetzal\+::expressive\+::chain}} (F1 f1, F2 f2, Fs... fs)
\begin{DoxyCompactList}\small\item\em Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Compile-\/time mathematical expressions optimization. 

\hypertarget{group__expressive_autotoc_md5}{}\doxysubsubsection{Motivations}\label{group__expressive_autotoc_md5}
\DoxyHorRuler{0}
\hypertarget{group__expressive_autotoc_md6}{}\doxyparagraph{Better express user-\/defined mathematical models}\label{group__expressive_autotoc_md6}
The impact of environmental factors or spatial structure on demographic processes can be assessed by setting up mathematical models linking environmental and demographic quantities together. Obviously, the details of the functions used depend on the biological context and the modeler intuition, so there is {\bfseries{no do-\/it-\/all function}} that could be implemented once and used in all possible contexts.

Inevitably, later or sooner the user would have to build its own modeling functions\+: all we can do is to propose {\bfseries{concise way to express them.}}\hypertarget{group__expressive_autotoc_md7}{}\doxyparagraph{Â \+Favor code modularity.}\label{group__expressive_autotoc_md7}
In the context of \href{https://en.wikipedia.org/wiki/Approximate_Bayesian_computation}{\texttt{ A\+BC}} it is expected that several of the function parameters change their values at runtime. One should prefer to pass around a whole expression with internally changing parameters values rather than passing multiples parameters everywhere in the code to propagate their new state (what would greatly hinder maintainability, especially since A\+BC approaches tend to favor models comparison thus code flexibility).

Expressive features allow to {\bfseries{encapsulate models details in an efficient way.}}\hypertarget{group__expressive_autotoc_md8}{}\doxyparagraph{Do it with minimal runtime cost}\label{group__expressive_autotoc_md8}
To tackle both this multiplicity and the computational cost imposed by \href{https://en.wikipedia.org/wiki/Approximate_Bayesian_computation}{\texttt{ A\+BC}} approaches, we integrate \href{https://github.com/ambre-m/expressive}{\texttt{ expressive}}, a library that allows to compose mathematical expressions at compile time. Compile-\/time expressions manipulation allows the compiler to apply intra-\/procedural optimization (dead code elimination, branch prediction, induction variable elimination). Finally, it allows the compiler to simplify the expressions, or even deduce the final result of the function. This comes along with the other known \href{https://en.wikipedia.org/wiki/Inline_expansion}{\texttt{ benefits of eliminating a function call}}, namely\+:
\begin{DoxyItemize}
\item It does not require function calling overhead.
\item It saves overhead of variables push/pop on the stack, while function calling.
\item It saves overhead of return call from a function.
\item It increases \href{https://en.wikipedia.org/wiki/Interprocedural_optimization}{\texttt{ locality of reference}}.
\end{DoxyItemize}\hypertarget{group__expressive_autotoc_md9}{}\doxysubsubsection{Examples of biological interests}\label{group__expressive_autotoc_md9}
\DoxyHorRuler{0}
\hypertarget{group__expressive_autotoc_md10}{}\doxyparagraph{Representing dispersal kernels}\label{group__expressive_autotoc_md10}
Representation of a dispersal kernel density involves some kind of mathematical composition. In the simple case where density is only a function of the geographic distance, the details of the distance computation can be separated from the details of the kernel used by composing two independently defined functions.

The inner function $ g : X^2 \rightarrow R$ would be the distance computation function between two points of the geographic space $X$, and can be expressed in terms of a callable object having a {\ttfamily distance\+\_\+type operator()(coord\+\_\+type x, coord\+\_\+type y)} interface.

The outer function $f : R \rightarrow [0,1]$ could be any kind of density function defined on the distance metric space $R$ and taking value in $[0,1] $, and can be defined in terms of a callable object having a {\ttfamily double operator()(distance\+\_\+type d)} interface.

Without expressive, these two types could not be composed. With expressive, it becomes trivial\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keyword}{using} coord\_type = int;}
\DoxyCodeLine{\textcolor{keyword}{using} distance\_type = double;}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto} g = [](coord\_type x, coord\_type y)\{}
\DoxyCodeLine{    distance\_type d = \textcolor{comment}{// ...}}
\DoxyCodeLine{    \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto} f = [](distance\_type d)\{}
\DoxyCodeLine{  \textcolor{comment}{// ...}}
\DoxyCodeLine{   \textcolor{keywordflow}{return} proba;}
\DoxyCodeLine{ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keyword}{auto} kernel = \mbox{\hyperlink{group__expressive_ga12574ee3c5da08311afb7eb76d7089b4}{quetzal::expressive::compose}}(f,g);}
\end{DoxyCode}
\hypertarget{group__expressive_autotoc_md11}{}\doxyparagraph{Representing environmental quantities as functions of space and time.}\label{group__expressive_autotoc_md11}
In the framework of complex coalescence processes, a major benefit of expressive is the possibility to express and compose quantities that are functions of space and time.

The geography module, via the Discrete\+Landscape class template, provides lightweight function objects of space and time which are callable with Geographic\+Coordinates and an user-\/defined time argument to access environmental values. These little objects can be composed into more complex expressions using expressive. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{group__expressive_gad7b37454071e4a4d0cf22961f4c6f2c8}\label{group__expressive_gad7b37454071e4a4d0cf22961f4c6f2c8}} 
\index{expressive@{expressive}!chain@{chain}}
\index{chain@{chain}!expressive@{expressive}}
\doxysubsubsection{\texorpdfstring{chain()}{chain()}}
{\footnotesize\ttfamily template$<$typename F1 , typename F2 , typename... Fs$>$ \\
constexpr auto quetzal\+::expressive\+::chain (\begin{DoxyParamCaption}\item[{F1}]{f1,  }\item[{F2}]{f2,  }\item[{Fs...}]{fs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}



Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} 

Forms an expression in which the outputs of the inner functions become the input of the outer function.


\begin{DoxyParams}{Parameters}
{\em f1} & the outer function \\
\hline
{\em f2} & the inner function\+: its output is the input of f1 \\
\hline
{\em fs} & the inner functions\+: their output are the input of f2 \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__expressive_ga12574ee3c5da08311afb7eb76d7089b4}\label{group__expressive_ga12574ee3c5da08311afb7eb76d7089b4}} 
\index{expressive@{expressive}!compose@{compose}}
\index{compose@{compose}!expressive@{expressive}}
\doxysubsubsection{\texorpdfstring{compose()}{compose()}}
{\footnotesize\ttfamily template$<$typename F , typename... Fs$>$ \\
constexpr auto quetzal\+::expressive\+::compose (\begin{DoxyParamCaption}\item[{F}]{f,  }\item[{Fs...}]{fs }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}



Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} 

Forms an expression in which the outputs of the inner functions become the input of the outer function.


\begin{DoxyParams}{Parameters}
{\em f} & the outer function \\
\hline
{\em fs} & the inner functions \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__expressive_ga58c778e9b9b37d66cacf0661990d0545}\label{group__expressive_ga58c778e9b9b37d66cacf0661990d0545}} 
\index{expressive@{expressive}!literal@{literal}}
\index{literal@{literal}!expressive@{expressive}}
\doxysubsubsection{\texorpdfstring{literal()}{literal()}}
{\footnotesize\ttfamily template$<$typename... Args, typename T $>$ \\
constexpr auto quetzal\+::expressive\+::literal (\begin{DoxyParamCaption}\item[{T}]{t }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}



Transforms \href{https://stackoverflow.com/documentation/c\%2b\%2b/7836/literals\#t=201709240552046831589}{\texttt{ literals}} into operator friendly classes. 

Transforms a \href{https://stackoverflow.com/documentation/c\%2b\%2b/7836/literals\#t=201709240552046831589}{\texttt{ literal}} object into operator friendly class, allowing it to be composed into a more complex expression using mathematical operators with others expressive objects having compatible callable interface.


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & the literal type \\
\hline
{\em Args} & the callable interface arguments to which the literal should be transformed \\
\hline
\end{DoxyTemplParams}
\mbox{\Hypertarget{group__expressive_ga92089d2dbe2fb1d9ec4b8da47930b8ec}\label{group__expressive_ga92089d2dbe2fb1d9ec4b8da47930b8ec}} 
\index{expressive@{expressive}!operator$<$$<$@{operator$<$$<$}}
\index{operator$<$$<$@{operator$<$$<$}!expressive@{expressive}}
\doxysubsubsection{\texorpdfstring{operator$<$$<$()}{operator<<()}}
{\footnotesize\ttfamily template$<$typename Inner , typename Outer $>$ \\
constexpr auto quetzal\+::expressive\+::operator$<$$<$ (\begin{DoxyParamCaption}\item[{Outer}]{outer,  }\item[{Inner}]{inner }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}



Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} 

Forms an expression in which the output of the inner function becomes the input of the outer function.


\begin{DoxyParams}{Parameters}
{\em outer} & the outer function \\
\hline
{\em inner} & the inner function \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__expressive_ga94be9d80e6f5f2281e4183109879a101}\label{group__expressive_ga94be9d80e6f5f2281e4183109879a101}} 
\index{expressive@{expressive}!operator$>$$>$@{operator$>$$>$}}
\index{operator$>$$>$@{operator$>$$>$}!expressive@{expressive}}
\doxysubsubsection{\texorpdfstring{operator$>$$>$()}{operator>>()}}
{\footnotesize\ttfamily template$<$typename Inner , typename Outer $>$ \\
constexpr auto quetzal\+::expressive\+::operator$>$$>$ (\begin{DoxyParamCaption}\item[{Inner}]{inner,  }\item[{Outer}]{outer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}



Mathematical \href{https://en.wikipedia.org/wiki/Function_composition}{\texttt{ function composition}} 

Forms an expression in which the output of the inner function becomes the input of the outer function.


\begin{DoxyParams}{Parameters}
{\em inner} & the inner function \\
\hline
{\em outer} & the inner functions \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{group__expressive_gacdec2cd4ec959709f7a1891702c4d5dd}\label{group__expressive_gacdec2cd4ec959709f7a1891702c4d5dd}} 
\index{expressive@{expressive}!use@{use}}
\index{use@{use}!expressive@{expressive}}
\doxysubsubsection{\texorpdfstring{use()}{use()}}
{\footnotesize\ttfamily template$<$typename F $>$ \\
constexpr auto quetzal\+::expressive\+::use (\begin{DoxyParamCaption}\item[{F}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [constexpr]}}



Transforms functions into operator friendly classes. 

Transforms a function object into operator friendly class, allowing it to be composed into a more complex expression using mathematical operators with others expressive objects having compatible callable interface.


\begin{DoxyParams}{Parameters}
{\em f} & a function object \\
\hline
\end{DoxyParams}
